script(src='/js/chart.js')

hr
h1= tweets.length + " Total"

h1 Most recent tweet
input(name='document[id]', value=JSON.stringify(chartData), type='hidden', id='chart-data')
p=recent_tweet.created_at
p
  img(src=recent[0].user.profile_image_url)
p=recent_tweet.user.name
p=recent_tweet.text

p=recent_tweet.user.friends_count + " Friends"

      
h2 Tracking
  - var keywords = user.keywords.split(',')
  Tracking
  each keyword in keywords
    button.update-keyword.group-toggle.selected(data-keyword=keyword)=keyword
    
h4
  a(href='/users/' + user.id) To edit your keywords click here
    
  
  h2 Date range
  .date-range
    label(for="from") From
    input#from(type="text", name="from")
    label(for="to") to
    input#to(type="text", name="to")
    button#submit-date-range Go
  
  
  br
  h2 Chart type
  .chart-types
    button.update-chart.group-radial.selected(data-chart="Pie") Pie
    button.update-chart.group-radial(data-chart="Doughnut") Doughnut
    button.update-chart.group-radial(data-chart="PolarArea") Polar area
    button.update-chart.group-radial(data-chart="Bar") Bar
    button.update-chart.group-radial(data-chart="Line") Line
    button.update-chart.group-radial(data-chart="Radar") Radar
  .current-chart
    canvas#myChart
  .current-chart-legend
    each dataPoint in chartData
      br
      .chartBox(style= "background-color:" + dataPoint.color + "; display:inline-block")
      span= dataPoint.keyword + " (" + dataPoint.value + " tweets  " + dataPoint.percentage + "%)"
  

hr
ul.tweets
  each tweet in created
    li.tweet 
      img(src=tweet.user.profile_image_url)
      span.user=tweet.user.screen_name 
      span.text= tweet.text
      span.keywords Tracked by: #{tweet.keywords}
      span.lang= tweet.lang
      span.source= tweet.source

h1 Tweets by language
ul.tweets
  each val in lang
    li= val[0] + ": " + val[1] + " : " + (Math.round((val[1]/tweets.length)*100)).toString() + "%"

h2 Tweets by source
ul.tweets
  each val in source
    - var html = "<li>" + val[0].charAt(0).toUpperCase() + val[0].slice(1) + ": " + val[1] + " : " + (Math.round((val[1]/tweets.length)*100)).toString() + "%" + "</li>"
    | !{html}