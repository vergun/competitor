// Generated by CoffeeScript 1.6.3
(function() {
  this.Competitor.module("TweetApp.Index", function(Index, App, Backbone, Mariontte, $, _, Chart) {
    return Index.Controller = {
      showIndex: function() {
        var tweets,
          _this = this;
        tweets = App.request("get:index:tweets");
        this.layout = this.getIndexLayout();
        tweets.fetch().done(function() {
          return App.mainRegion.show(_this.layout);
        });
        return this.layout.on("show", function() {
          tweets = tweets.models[0];
          _this.showHeader(tweets);
          _this.showHeaderNav(tweets);
          _this.showLeftNav(tweets);
          _this.showTweetList(tweets);
          _this.showChart(tweets);
          return _this.showChartLegend(tweets);
        });
      },
      /* layout*/

      getIndexLayout: function() {
        return new Index.Layout;
      },
      /* header*/

      showHeader: function(tweets) {
        this.headerView = this.getHeaderView(tweets);
        return this.layout.headerRegion.show(this.headerView);
      },
      showHeaderNav: function(tweets) {
        this.headernavView = this.getHeaderNavView(tweets);
        this.headernavView.on("update:chart", function(options) {
          this.model.set('chart', options.type);
          $.extend(options, {
            model: this.model
          });
          return App.vent.trigger("update:chart", options);
        });
        return this.layout.headerNavRegion.show(this.headernavView);
      },
      getHeaderView: function(tweets) {
        return new Index.Header({
          model: tweets
        });
      },
      getHeaderNavView: function(tweets) {
        return new Index.HeaderNav({
          model: tweets
        });
      },
      /* left*/

      showLeftNav: function(tweets) {
        this.sidenavView = this.getLeftNavView(tweets);
        return this.layout.sideNavRegion.show(this.sidenavView);
      },
      getLeftNavView: function(tweets) {
        return new Index.LeftNav({
          model: tweets
        });
      },
      /*  tweet list*/

      showTweetList: function(tweets) {
        this.tweetListView = this.getTweetListView(tweets);
        return this.layout.tweestListRegion.show(this.tweetListView);
      },
      getTweetListView: function(tweets) {
        return new Index.TweetList({
          model: tweets
        });
      },
      /*  right side*/

      showChart: function(tweets) {
        console.log(tweets);
        this.chartView = this.getChartView;
        return this.layout.chartRegion.show(this.chartView(tweets));
      },
      showChartLegend: function(data) {
        this.chartLegendView = this.getChartLegendView(data);
        return this.layout.chartLegendRegion.show(this.chartLegendView);
      },
      getChartView: function(data) {
        return new Index.Chart({
          model: data
        });
      },
      getChartLegendView: function(data) {
        return new Index.ChartLegend({
          model: data
        });
      }
    };
  });

}).call(this);
